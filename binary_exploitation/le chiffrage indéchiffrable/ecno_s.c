
#include <stdio.h>
#include <string.h>
#include <ctype.h>

void encrypt(char *str, char *key) {
    int len1 = strlen(str);
    int len2 = strlen(key);
    int i;

    for (i = 0; i < len1; i++) {
        if (isalpha(str[i])) {
            int j = i % len2;
            int shift = tolower(key[j]) - 'a';
            if (isupper(key[j])) {
                shift = toupper(key[j]) - 'A';
            }
            if (isupper(str[i])) {
                str[i] = (str[i] - 'A' + shift) % 26 + 'A';
            } else {
                str[i] = (str[i] - 'a' + shift) % 26 + 'a';
            }
        }
    }
}

int main() {
    FILE *fp;
    char message[1001];
    char key[] = "LEARNINGISFUN";

    fp = fopen("Flag.txt", "r");
    if (fp == NULL) {
        printf("Could not open file %s\n", "Flag.txt");
        return 1;
    }

    fgets(message, 1000, fp);
    fclose(fp);

    encrypt(message, key);
    printf("Encrypted message: %s\n", message);

    return 0;
}

This C code performs a simple encryption on a message read from a file named "Flag.txt". The `encrypt` function takes the message string and a key string as input. It iterates over each character in the message and applies a shift cipher based on the corresponding character in the key string. The shift amount is determined by the position of the key character in the alphabet (case-insensitive). The encrypted character is then calculated by shifting the original character by the shift amount, wrapping around the alphabet if necessary.

The `main` function opens the "Flag.txt" file, reads its contents into the `message` array, closes the file, calls the `encrypt` function with the message and the key string "LEARNINGISFUN", and finally prints the encrypted message.

Note that this code assumes that the input file exists and contains a valid message string. Proper error handling and input validation should be added for production use.

